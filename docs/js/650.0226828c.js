"use strict";(globalThis["webpackChunkmac_frontend_spa"]=globalThis["webpackChunkmac_frontend_spa"]||[]).push([[650],{5879:(e,t,a)=>{a.d(t,{k:()=>l});const l=function(e){return e.response?{message:e.message,url:e.config.baseURL+e.config.url.slice(1),details:e.response.data}:e.request?{message:e.message,url:e.config.baseURL+e.config.url.slice(1),details:"Check the availability of your API and/or the CORS policy on the API."}:{message:e.message,url:e.config.baseURL+e.config.url.slice(1),details:"Unknown error"}}},4329:(e,t,a)=>{a.d(t,{o:()=>i});var l=a(1555),o=a(660),n=a(1271);const u="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";function s(e){return n.A.getItem(e)}function r(e,t){n.A.setItem(e,t)}o.api.defaults.headers["client_id"]=s("client_id")??"",o.api.defaults.headers["client_secret"]=s("client_secret")??"",o.api.defaults.baseURL=s("baseUrl")??"http://localhost:8081/api/";const i=(0,l.nY)("agentStore",{state:()=>({template:u,instructions:u,decorator:{before:u,after:u},error:null,pageTitle:s("pageTitle")??"MuleSoft AI Chain Demo Frontend",agentName:s("agentName")??"Bot agent",userName:s("userName")??"Max"}),getters:{getTemplate:e=>e.template,getInstructions:e=>e.instructions,getDecorator:e=>e.decorator,getError:e=>e.error,getPageTitle:e=>e.pageTitle,getAgentName:e=>e.agentName,getUserName:e=>e.userName},actions:{saveAgentSettings(){},setBaseUrl(e){r("baseUrl",e),o.api.defaults.baseURL=e},setClientCredentias(e,t){r("client_id",e),r("client_secret",t),o.api.defaults.headers["client_id"]=e,o.api.defaults.headers["client_secret"]=t},setError(e){this.error=e},resetError(){this.error=null},setAgentName(e){r("agentName",e),this.agentName=e},setUserName(e){r("userName",e),this.userName=e},setPageTitle(e){r("pageTitle",e),this.pageTitle=e}}})},6650:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});a(239),a(7225),a(8743),a(2858),a(2071),a(5520),a(2775),a(6203);var l=a(1758),o=a(8790),n=a(8734),u=a(9104),s=a(660),r=a(5879),i=a(4329);const d=Object.assign({name:"ErrorDialog"},{__name:"ErrorDialog",setup(e){const t=(0,i.o)(),a=(0,n.KR)(!1),u=(0,n.KR)(null);function s(){t.resetError(),a.value=!1}return(0,l.wB)((()=>t.error),((e,t)=>{e&&(u.value=e,a.value=!0)})),(e,t)=>{const n=(0,l.g2)("q-card-section"),r=(0,l.g2)("q-btn"),i=(0,l.g2)("q-card"),d=(0,l.g2)("q-dialog");return(0,l.uX)(),(0,l.Wv)(d,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onHide:s},{default:(0,l.k6)((()=>[(0,l.bF)(i,{flat:"",bordered:"",style:{width:"700px"}},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"bg-negative text-center"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(u.value.message),1)])),_:1}),(0,l.bF)(n,{class:"col"},{default:(0,l.k6)((()=>[t[1]||(t[1]=(0,l.Lk)("div",{class:"text-overline"},"URL",-1)),(0,l.Lk)("div",null,(0,o.v_)(u.value.url),1),t[2]||(t[2]=(0,l.Lk)("div",{class:"text-overline q-pt-md"},"Details",-1)),(0,l.Lk)("div",null,(0,o.v_)(u.value.details),1)])),_:1}),(0,l.bF)(n,{class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{outline:"",color:"negative",label:"Close",onClick:s})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});var c=a(2156),m=a(3316),p=a(4189),v=a(1693),g=a(8582),h=a.n(g);const f=d,b=f;h()(d,"components",{QDialog:c.A,QCard:m.A,QCardSection:p.A,QBtn:v.A});const k={class:"q-pl-md q-pb-md q-pr-md row justify-center items-end col-9"},_={style:{width:"100%"},class:"q-px-md"},x={style:{bottom:"0"}},q={class:"text-overline q-pt-sm"},y={class:"text-overline q-pt-sm"},A={class:"text-overline q-pt-sm"},R=Object.assign({name:"ChatPage"},{__name:"ChatPage",setup(e){const t=(0,i.o)(),a=(0,l.EW)((()=>window.innerHeight-145)),d=(0,n.KR)(""),c=(0,n.KR)(.5),m=(0,n.KR)(!0),p=(0,n.KR)(!1),v=(0,n.KR)(null),g=(0,n.KR)(["default"]),h=(0,n.KR)("default"),f=(0,n.KR)(["default"]),R=(0,n.KR)("default"),L=(0,n.KR)(500),F=(0,n.KR)({input:0,output:0}),V=(0,n.KR)({input:0,output:0});var C=(0,n.KR)([{name:t.getAgentName,text:["Hi, how can I help you?"]}]);function N(){d.value.length>0&&(C.value.push({name:t.getUserName,text:[d.value]}),w(d.value),d.value=""),C.value.push({name:t.getAgentName,text:[""]}),U()}function U(){const e=v.value.getScrollTarget();v.value.setScrollPosition("vertical",e.scrollHeight,300)}function w(e){s.api.post("/chat",{prompt:e,llm_temperature:c.value,llm_provider:h.value,llm_model:R.value,chat_memory:m.value,max_output_token:parseInt(L.value)},{headers:{userId:t.getUserName}}).then((e=>{C.value.at(-1).text=[e.data.promptResponse],F.value={input:e.data.inputTokens,output:e.data.outputTokens},V.value.input+=e.data.inputTokens,V.value.output+=e.data.outputTokens})).catch((e=>{t.setError((0,r.k)(e)),C.value.at(-1).text=["### "+e.message+" ###"]}))}function Q(){s.api.get("/llm").then((e=>{g.value=[],f.value=[],e.data.forEach((e=>{g.value.push(e.llm_provider),g.value=[...new Set(g.value)],f.value.push(e.llm_model),h.value=g.value[0],R.value=f.value[0]}))})).catch((e=>{console.log("No LLM list found, providing 'default' only.")}))}function T(){s.api.delete("/chat").then((e=>{C.value=[{name:t.getAgentName,text:["Hi, how can I help you?"]}],F.value={input:0,output:0},V.value={input:0,output:0}})).catch((e=>{t.setError((0,r.k)(e))}))}return(0,l.sV)((()=>{Q()})),(e,s)=>{const r=(0,l.g2)("q-chat-message"),i=(0,l.g2)("q-spinner-dots"),U=(0,l.g2)("q-scroll-area"),w=(0,l.g2)("q-btn"),Q=(0,l.g2)("q-input"),K=(0,l.g2)("q-slider"),S=(0,l.g2)("q-toggle"),E=(0,l.g2)("q-select"),I=(0,l.g2)("q-card-section"),P=(0,l.g2)("q-separator"),j=(0,l.g2)("q-badge"),M=(0,l.g2)("q-card-actions"),W=(0,l.g2)("q-card"),D=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(D,{class:"flex content-end items-stretch"},{default:(0,l.k6)((()=>[(0,l.bF)(W,{flat:"",style:{"min-height":"inherit",width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(I,{horizontal:"",style:{height:"calc(100% - 33px)"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",k,[(0,l.Lk)("div",_,[(0,l.bF)(U,{ref_key:"scrollArea",ref:v,style:(0,o.Tr)({height:a.value+"px",overflow:"hidden"}),"content-style":{display:"flex","flex-direction":"column","justify-content":"flex-end"},"thumb-style":{opacity:0}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(C),(e=>((0,l.uX)(),(0,l.CE)("div",{key:e},[e.text[0].length>0?((0,l.uX)(),(0,l.Wv)(r,{key:0,name:e.name,avatar:e.name===(0,n.R1)(t).getAgentName?"https://cdn.quasar.dev/img/avatar1.jpg":"https://cdn.quasar.dev/img/avatar2.jpg",text:e.text,"text-html":"",sent:e.name!==(0,n.R1)(t).getAgentName,"bg-color":e.name===(0,n.R1)(t).getAgentName?"primary":"secondary","text-color":"white"},null,8,["name","avatar","text","sent","bg-color"])):((0,l.uX)(),(0,l.Wv)(r,{key:1,name:e.name,avatar:"https://cdn.quasar.dev/img/avatar1.jpg","bg-color":"primary","text-color":"white"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{class:"q-pl-sm",size:"2rem"})])),_:2},1032,["name"]))])))),128))])),_:1},8,["style"]),(0,l.bF)(Q,{color:"secondary",filled:"",dense:"",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"q-pt-sm",onKeydown:(0,u.jR)(N,["enter"])},{after:(0,l.k6)((()=>[(0,l.bF)(w,{round:"",dense:"",flat:"",icon:"send",onClick:N,type:"submit"})])),_:1},8,["modelValue"])])]),(0,l.bF)(I,{class:"col-3"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",x,[s[7]||(s[7]=(0,l.Lk)("div",{class:"text-h6"},"Chat Options",-1)),(0,l.Lk)("div",q,"LLM temperature: "+(0,o.v_)(c.value),1),(0,l.bF)(K,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),color:"accent",min:0,step:.1,max:2,style:{width:"100%"}},null,8,["modelValue"]),(0,l.Lk)("div",y,"Chat memory enabled: "+(0,o.v_)(m.value),1),(0,l.bF)(S,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),color:"accent"},null,8,["modelValue"]),(0,l.Lk)("div",A,"Speach enabled: "+(0,o.v_)(p.value),1),(0,l.bF)(S,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=e=>p.value=e),color:"accent"},null,8,["modelValue"]),s[8]||(s[8]=(0,l.Lk)("div",{class:"text-overline q-pt-sm"},"LLM",-1)),(0,l.bF)(E,{outlined:"",dense:"",color:"accent",modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=e=>h.value=e),options:g.value,label:"Provider"},null,8,["modelValue","options"]),(0,l.bF)(E,{outlined:"",dense:"",color:"accent",class:"q-pt-sm",modelValue:R.value,"onUpdate:modelValue":s[5]||(s[5]=e=>R.value=e),options:f.value,label:"Model"},null,8,["modelValue","options"]),s[9]||(s[9]=(0,l.Lk)("div",{class:"text-overline q-pt-sm"},"Max output token",-1)),(0,l.bF)(Q,{outlined:"",dense:"",color:"accent",modelValue:L.value,"onUpdate:modelValue":s[6]||(s[6]=e=>L.value=e),type:"number",label:"0 = unlimited",rules:[e=>e>=0||"Value must be <= 0"]},null,8,["modelValue","rules"]),s[10]||(s[10]=(0,l.Lk)("div",{class:"text-overline q-pt-sm"},"Purge chat memory",-1)),(0,l.bF)(w,{outline:"",color:"accent",label:"Reset",onClick:T})])])),_:1})])),_:1}),(0,l.bF)(P),(0,l.bF)(M,{style:{height:"30px","padding-left":"32px","padding-right":"32px"},class:"q-gutter-x-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{color:"accent"},{default:(0,l.k6)((()=>[(0,l.eW)(" Total tokens: "+(0,o.v_)(V.value.input+V.value.output)+" ("+(0,o.v_)(V.value.input)+" input, "+(0,o.v_)(V.value.output)+" output) ",1)])),_:1}),(0,l.bF)(j,{color:"accent"},{default:(0,l.k6)((()=>[(0,l.eW)(" Last call tokens: "+(0,o.v_)(F.value.input+F.value.output)+" ("+(0,o.v_)(F.value.input)+" input, "+(0,o.v_)(F.value.output)+" output) ",1)])),_:1})])),_:1})])),_:1}),(0,l.bF)(b)])),_:1})}}});var L=a(7716),F=a(8958),V=a(1770),C=a(9198),N=a(9270),U=a(1444),w=a(6908),Q=a(5601),T=a(386),K=a(2669),S=a(3954);const E=R,I=E;h()(R,"components",{QPage:L.A,QCard:m.A,QCardSection:p.A,QScrollArea:F.A,QChatMessage:V.A,QSpinnerDots:C.A,QInput:N.A,QBtn:v.A,QSlider:U.A,QToggle:w.A,QSelect:Q.A,QSeparator:T.A,QCardActions:K.A,QBadge:S.A})}}]);